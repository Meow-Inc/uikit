{"version":3,"file":"main.97ff20080aafb792007e.hot-update.js","sources":["webpack:///./src/widgets/Modal/ModalContext.tsx"],"sourcesContent":["import React, { createContext, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Overlay from \"../../components/Overlay/Overlay\";\nimport { Handler } from \"./types\";\n\ninterface ModalsContext {\n  onPresent: (node: React.ReactNode, key?: string) => void;\n  onDismiss: Handler;\n  setCloseOnOverlayClick: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nconst ModalWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: ${({ theme }) => theme.zIndices.modal - 1};\n\n  justify-content: flex-end;\n\n  ${({ theme }) => theme.mediaQueries.xs} {\n    justify-content: center;\n  }\n`;\n\nexport const Context = createContext<ModalsContext>({\n  onPresent: () => null,\n  onDismiss: () => null,\n  setCloseOnOverlayClick: () => true,\n});\n\nconst ModalProvider: React.FC = ({ children }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [modalNode, setModalNode] = useState<React.ReactNode>();\n  const [closeOnOverlayClick, setCloseOnOverlayClick] = useState(true);\n\n  const handlePresent = (node: React.ReactNode) => {\n    setModalNode(node);\n    setIsOpen(true);\n  };\n\n  const handleDismiss = () => {\n    setModalNode(undefined);\n    setIsOpen(false);\n  };\n\n  const handleOverlayDismiss = () => {\n    if (closeOnOverlayClick) {\n      handleDismiss();\n    }\n  };\n\n  return (\n    <Context.Provider\n      value={{\n        onPresent: handlePresent,\n        onDismiss: handleDismiss,\n        setCloseOnOverlayClick,\n      }}\n    >\n      {isOpen && (\n        <ModalWrapper>\n          <Overlay show onClick={handleOverlayDismiss} />\n          {React.isValidElement(modalNode) &&\n            React.cloneElement(modalNode, {\n              onDismiss: handleDismiss,\n            })}\n        </ModalWrapper>\n      )}\n      {children}\n    </Context.Provider>\n  );\n};\n\nexport default ModalProvider;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;;;AASA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAIA;AAAA;AAAA;AAKA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAHA;AACA;AAKA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAHA;AADA;AAQA;AACA;AAAA;AAAA;AAGA;AADA;AAHA;AARA;AAmBA;AACA;AA1CA;AA2CA;AACA;;;;;;;;;;;;;;;;A","sourceRoot":""}